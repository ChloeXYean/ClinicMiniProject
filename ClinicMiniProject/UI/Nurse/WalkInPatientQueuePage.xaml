<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:ClinicMiniProject.UI.Control"
             
             xmlns:viewmodels="clr-namespace:ClinicMiniProject.ViewModels"
             
             
             x:Class="ClinicMiniProject.UI.Nurse.WalkInPatientQueuePage"
             Title="WalkInPatientQueuePage"
             BackgroundColor="White"
             NavigationPage.HasNavigationBar="False">

    <Grid RowDefinitions="Auto, *">

        <VerticalStackLayout Grid.Row="1" Padding="20" Spacing="20">

            <Label Text="Date: 12 November 2025" 
                   TextColor="Black" 
                   FontSize="14" 
                   Margin="5,0,0,0"/>

            <CollectionView x:Name="WalkInPatientList" 
                ItemsSource="{Binding QueueList}">

                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="15" />
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border BackgroundColor="#EEEEEE"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 15"
                                Padding="15">

                            <Border.Shadow>
                                <Shadow Brush="Black" Opacity="0.5" Radius="5" Offset="2,2"/>
                            </Border.Shadow>

                            <Grid RowDefinitions="Auto, Auto, Auto" ColumnDefinitions="Auto, *">

                                <Image Grid.Row="0" Grid.Column="0" Source="person.png" HeightRequest="20" VerticalOptions="Center"/>
                                <Label Grid.Row="0" Grid.Column="1" 
                                       Text="{Binding PatientName, StringFormat='Patient Name: {0}'}" 
                                       TextColor="Black" FontAttributes="Bold" FontSize="14" VerticalOptions="Center" Margin="10,0,0,0"/>

                                <Image Grid.Row="1" Grid.Column="0" Source="clock.png" HeightRequest="15" VerticalOptions="Center" Margin="2,10,0,0"/>
                                <Label Grid.Row="1" Grid.Column="1" 
                                       Text="{Binding RegisteredTime, StringFormat='Registered Time: {0}'}" 
                                       TextColor="Black" FontSize="13" VerticalOptions="Center" Margin="10,10,0,0"/>

                                <Label Grid.Row="2" Grid.Column="1" 
                                       Text="View Details" 
                                       TextColor="#2D5AF0" FontSize="11" TextDecorations="Underline" HorizontalOptions="End" Margin="0,15,0,0">
                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:WalkInPatientQueueViewModel}}, Path=ViewDetailsCommand}"
                                        CommandParameter="{Binding .}"/>
                                    </Label.GestureRecognizers>
                                </Label>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </Grid>
</ContentPage>