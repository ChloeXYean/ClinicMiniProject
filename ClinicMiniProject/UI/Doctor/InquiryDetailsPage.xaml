<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:control="clr-namespace:ClinicMiniProject.UI.Control"
             xmlns:converters="clr-namespace:ClinicMiniProject.Converters"
             x:Class="ClinicMiniProject.UI.Doctor.InquiryDetailsPage"
             Title="Inquiry Details"
             Shell.NavBarIsVisible="True">

    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:InvertedBoolConverter x:Key="InvertedBoolConverter"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto,*" RowSpacing="0">

        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20" Spacing="14">

                <Border BackgroundColor="#F5F7FF" StrokeThickness="0" Padding="16">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16" />
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="6">
                        <Label Text="{Binding PatientName}" FontSize="18" FontAttributes="Bold" />
                        <Label Text="{Binding PatientAgeGender}" />
                        <Button Text="View Full Profile" Command="{Binding ViewFullProfileCommand}" />
                    </VerticalStackLayout>
                </Border>

                <Border BackgroundColor="#FFFFFF" StrokeThickness="0" Padding="16">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16" />
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Symptom Description" FontAttributes="Bold" />
                        <Label Text="{Binding FullSymptomDescription}" />
                    </VerticalStackLayout>
                </Border>

                <Border BackgroundColor="#FFFFFF" StrokeThickness="0" Padding="16">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16" />
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Uploaded Photos" FontAttributes="Bold" />
                        <HorizontalStackLayout Spacing="10">
                            <Border Stroke="#D0D0D0" StrokeThickness="1" WidthRequest="100" HeightRequest="100">
                                <Image Source="{Binding ImageSource1}" Aspect="AspectFill" />
                            </Border>
                            <Border Stroke="#D0D0D0" StrokeThickness="1" WidthRequest="100" HeightRequest="100">
                                <Image Source="{Binding ImageSource2}" Aspect="AspectFill" />
                            </Border>
                            <Border Stroke="#D0D0D0" StrokeThickness="1" WidthRequest="100" HeightRequest="100">
                                <Image Source="{Binding ImageSource3}" Aspect="AspectFill" />
                            </Border>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <Border BackgroundColor="#FFFFFF" StrokeThickness="0" Padding="16">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16" />
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Doctor Response" FontAttributes="Bold" />

                        <Editor Text="{Binding DoctorResponseText, Mode=TwoWay}" 
                                Placeholder="{Binding IsDoctor, Converter={StaticResource InvertedBoolConverter}, ConverterParameter='No response yet|Type your response'}"
                                IsReadOnly="{Binding IsDoctor, Converter={StaticResource InvertedBoolConverter}}"
                                HeightRequest="140" 
                                AutoSize="TextChanges" />
                    </VerticalStackLayout>
                </Border>

                <Button Text="Send Response" 
                        Command="{Binding SendResponseCommand}" 
                        IsVisible="{Binding IsDoctor}"
                        HeightRequest="52" />

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>